<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Getränke Lieferservice München – App Style</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
  <!-- ===== Header ===== -->
  <header class="main-header">
    <div class="container header-row">
      <div class="brand">
        <span class="name">Getränke Online Automaten Lieferservice</span>
        <span class="city"><i data-lucide="bike"></i></span>
      </div>
      <div class="header-actions">
        <a href="tel:+491632229705" class="call-btn">📞 Anrufen</a>
        <button id="openCheckoutTop" class="cart-btn">🛒 Zur Kasse</button>
      </div>
    </div>
  </header>

  <!-- ===== Tabs ===== -->
  <div class="container">
    <div class="tabs" id="tabs">
      <button class="tab" aria-selected="true" data-cat="wasser">
        <i data-lucide="droplet"></i> Wasser
      </button>
      <button class="tab" data-cat="soft">
        <i data-lucide="cup-soda"></i> Softdrinks
      </button>
      <button class="tab" data-cat="saft">
        <i data-lucide="apple"></i> Säfte
      </button>
      <button class="tab" data-cat="energy">
        <i data-lucide="zap"></i> Energy
      </button>
      <button class="tab" data-cat="salziges">
        <i data-lucide="pizza"></i> Salziges
      </button>
      <button class="tab" data-cat="suess">
        <i data-lucide="ice-cream"></i> Süßes
      </button>
    </div>
  </div>

  <!-- ===== Suche ===== -->
  <div class="container search-wrap">
    <div class="searchbar">
      <i data-lucide="search"></i>
      <input id="search" placeholder="Suche (z. B. Cola, Wasser, Saft) …" />
      <button id="clearSearch" class="clear" aria-label="Suche leeren"><i data-lucide="x"></i></button>
    </div>
    <div id="searchInfo" class="search-info" aria-live="polite"></div>
  </div>

  <!-- ===== Produktliste ===== -->
  <div class="container" style="padding-top:8px">
    <section id="grid" class="grid"></section>
  </div>

  <!-- ===== Sticky Cart Bar ===== -->
  <div class="cartbar" id="cartbar" style="display:none">
    <div class="row">
      <div class="summary"><span id="cartCount">0</span> Artikel · <span id="cartTotal">0,00 €</span></div>
      <div style="display:flex;gap:8px">
        <button class="view" id="openCart">Warenkorb ansehen</button>
        <button class="checkout" id="openCheckout">Zur Kasse</button>
      </div>
    </div>
  </div>

  <!-- ===== Drawer: Warenkorb + Daten ===== -->
  <div class="drawer" id="drawer" aria-hidden="true">
    <div class="panel" role="dialog" aria-modal="true">
      <header>
        <div class="container header-row" style="padding:10px 16px">
          <strong style="font-size:1.05rem">🛒 Bestellen</strong>
          <div class="seg" role="tablist" aria-label="Bestellschritte">
            <button class="active" id="tabCart" data-seg="cart" role="tab" aria-selected="true">Warenkorb</button>
            <button id="tabData" data-seg="data" role="tab" aria-selected="false">Daten</button>
          </div>
          <button id="closeDrawer" class="tab">Schließen</button>
        </div>
      </header>
      <main id="drawerMain">
        <section id="viewCart" aria-labelledby="tabCart">
          <div id="cartList"></div>
          <div class="summaryBox" id="cartSummaryBox">
            <div id="cartSummaryRows"></div>
            <button id="toData" class="cart-btn" style="margin-top:8px">Weiter zu Daten</button>
          </div>
        </section>

        <section id="viewForm" aria-labelledby="tabData">
          <form id="checkoutForm" class="checkout" action="https://formspree.io/f/xvgqjgrj" method="POST">
            <div class="field">
              <label for="name">Name</label>
              <input id="name" name="name" placeholder="Ihr Name" required />
            </div>
            <div class="field">
              <label for="address">Straße & Nr.</label>
              <input id="address" name="address" placeholder="Straße, Nr." required />
            </div>
            <div class="field">
              <label for="zipcode">PLZ, Ort (nur 80xxx)</label>
              <input id="zipcode" name="zipcode" placeholder="z. B. 80331 München" required />
              <div id="plzError" class="error">❌ Lieferung nur im PLZ-Bereich <b>80xxx</b> möglich.</div>
            </div>
            <div class="field">
              <label for="email">E-Mail</label>
              <input id="email" name="email" type="email" placeholder="mail@beispiel.de" required />
            </div>
            <div class="field">
              <label for="time">Lieferzeit</label>
              <select id="time" name="deliveryTime" required>
                <option value="">Bitte wählen …</option>
                <option value="asap">🚀 Schnellstmöglich</option>
                <option value="18-20">18–20 Uhr</option>
                <option value="20-22">20–22 Uhr</option>
              </select>
            </div>
            <div class="field">
              <label for="payment">Bezahlmethode</label>
              <select id="payment" name="payment" required>
                <option value="">Bitte wählen …</option>
                <option value="bar">Barzahlung bei Lieferung</option>
              </select>
            </div>
            <input type="hidden" id="orderDetails" name="orderDetails" />
            <button class="submit" type="submit">Bestellung absenden</button>
          </form>
        </section>
      </main>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
